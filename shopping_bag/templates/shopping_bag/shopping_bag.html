{% extends "base.html" %}
{% load static %}

{% block page_header %}
<hr class="product-details-hr">

    <div class="container-fluid header-container black-background d-lg-none">
        <div class="row">
            <div class="col">
                <ul class="black-links">
                    <a href="{% url 'products' %}?category=fashion"><li>Fashion</li></a>
                    <a href="{% url 'products' %}?category=home"><li>Home</li></a>
                    <a href="{% url 'products' %}?category=health"><li>Health & Beauty</li></a>
                    <a href="{% url 'products' %}"><li>All</li></a>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}



{% block content %}

<!-- Mobile Phone Shopping Bag layout -->

{% if shopping_bag_count %}
  
    {{ request.session.shopping_bag_session }}
{% endif %}


<div class="row mt-5 ml-2 d-md-none">
    <div class="col">
        <h5 class="font-weight-bold">Shopping Bag ( {{ shopping_bag_count }} )</h5>
    </div>
</div>

{% if shopping_bag_count %}

<div class="mt-3 ml-4 d-md-none">
    <div class="row">
        <div class="col-5">
            <h6 class="mt-3">Order Value</h6>
        </div>
        <div class="col-3 offset-3">
            <h6 class="mt-3">£{{ total_order_value }}</h6>
        </div>
    </div>
    <div class="row">
        <div class="col-5">
            <h6 class="mt-3">Delivery</h6>
        </div>
        <div class="col-3 offset-3">
            <h6 class="mt-3">£{{ delivery_cost }}</h6>
        </div>
    </div>
    <div class="row">
        <div class="col-5">
            <h6 class="mt-3">Total</h6>
        </div>
        <div class="col-3 offset-3">
            <h6 class="mt-3">£{{ total_including_delivery }}</h6>
        </div>
    </div>
    {% if free_delivery_delta %}
        <div class="row">
            <div class="col-10 offset-1">
                <h6 class="mt-3"><strong>Spend just £{{ free_delivery_delta }} more for free delivery!!</strong></h6>
            </div>
        </div>
    {% endif %} 
</div>

<div class="row">
    <div class="col ml-2 mr-2 pt-4 pb-4 text-center">
        <button class="btn btn-success checkout-button font-large">CHECKOUT</button>
    </div>
</div>

{% for item in shopping_bag_items  %}
<div class="row mt-3">
    <div class="col">  <!-- First column is the product image --> 
        {% if item.product.image.url %}
        <a href="{{ item.product.image.url }}" target="_blank">
            <img class="card-img-top img-fluid pt-2 pl-3" src="{{ item.product.image.url }}" alt="{{ product.name }}">
        </a>
        {% endif %}
    </div>

    <div class="col">  <!-- 2-4th columns is the Product Description -->
        
        <div class="row mt-1">
            <strong>{{ item.product.name }}</strong>
        </div>
        <div class="row">
            Size: {{ item.size }}
        </div>
        <div class="mt-4 row d-sm-none">
            Qty: {{ item.quantity }}
        </div>
    </div>

    <div class="col mt-1">  <!-- 5th column is the Price -->
        <strong>£{{ item.product.price }}</strong>
    </div>

</div>
{% endfor %}

{% else %}
<div class="empty-bag">
    <p class="">Your Shopping Bag is empty</p>
</div>

<a href="{% url 'products' %}" class=>
    <div class="row">
        <div class="col ml-2 mr-2 pt-4 text-center">
            <button class="btn btn-success checkout-button font-large">KEEP SHOPPING</button>
        </div>
    </div>
</a>

<div class="shopping-bag-hr">
    <hr>
</div>

<div class="empty-bag">
    <p class="">Items will appear here as you add them to your shopping bag.</p>
</div>

{% endif %}

<!-- Tablet and Large Screen Shopping Bag layout -->



{% endblock %}